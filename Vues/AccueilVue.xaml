<Page
    x:Class="GestionnaireDeLogement.Vues.AccueilVue"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    x:Name="PageAccueil"
    Background="{StaticResource FondSecondaire}">

    <!--
        =============================================================
        Gestionnaire de Logement
        Module Chauffage
        
        Copyright © 2026 Flo
        Licence : CC BY-NC 4.0
        Usage commercial interdit
        =============================================================
    -->

    <Page.Resources>
        <!--  Style pour les cartes statistiques  -->
        <Style x:Key="CarteStatistique" TargetType="Border">
            <Setter Property="Background" Value="{StaticResource FondCarte}" />
            <Setter Property="CornerRadius" Value="12" />
            <Setter Property="Padding" Value="22" />
            <Setter Property="Margin" Value="10" />
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect
                        BlurRadius="12"
                        Opacity="0.1"
                        ShadowDepth="2"
                        Color="#000000" />
                </Setter.Value>
            </Setter>
        </Style>

        <!--  Style pour les titres des cartes  -->
        <Style x:Key="TitreCarte" TargetType="TextBlock">
            <Setter Property="FontSize" Value="15" />
            <Setter Property="Foreground" Value="{StaticResource TexteSecondaire}" />
            <Setter Property="FontWeight" Value="SemiBold" />
        </Style>

        <!--  Style pour les valeurs des cartes  -->
        <Style x:Key="ValeurCarte" TargetType="TextBlock">
            <Setter Property="FontSize" Value="36" />
            <Setter Property="FontWeight" Value="Bold" />
            <Setter Property="Margin" Value="0,10,0,0" />
        </Style>

        <!--  Style pour le sous-texte des cartes  -->
        <Style x:Key="SousTexteCarte" TargetType="TextBlock">
            <Setter Property="FontSize" Value="13" />
            <Setter Property="Foreground" Value="{StaticResource TexteSecondaire}" />
            <Setter Property="Margin" Value="0,6,0,0" />
        </Style>

        <!--  Style pour l'emoji des cartes  -->
        <Style x:Key="EmojiCarte" TargetType="TextBlock">
            <Setter Property="FontSize" Value="48" />
            <Setter Property="VerticalAlignment" Value="Center" />
            <Setter Property="Margin" Value="12,0,0,0" />
        </Style>
    </Page.Resources>

    <Grid Margin="30">
        <Grid.RowDefinitions>
            <!--  Cartes statistiques : hauteur proportionnelle avec minimum  -->
            <RowDefinition Height="2*" MinHeight="180" />
            <!--  Espacement  -->
            <RowDefinition Height="20" />
            <!--  Titre section  -->
            <RowDefinition Height="Auto" />
            <!--  Liste des factures : prend plus de place  -->
            <RowDefinition Height="5*" />
        </Grid.RowDefinitions>

        <!--  ══════════════════════════════════════════════════════  -->
        <!--  SECTION 1 : CARTES STATISTIQUES (3 COLONNES)  -->
        <!--  ══════════════════════════════════════════════════════  -->
        <Viewbox Grid.Row="0" Stretch="Uniform">
            <Grid Width="950" Height="180">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <!--  CARTE 1 : Total des factures  -->
                <Border Grid.Column="0" Style="{StaticResource CarteStatistique}">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>

                        <!--  Contenu texte  -->
                        <StackPanel Grid.Column="0" VerticalAlignment="Center">
                            <TextBlock Style="{StaticResource TitreCarte}" Text="Total des factures" />
                            <TextBlock
                                x:Name="TxtTotalFactures"
                                Foreground="{StaticResource CouleurPrincipale}"
                                Style="{StaticResource ValeurCarte}"
                                Text="0,00 €" />
                            <TextBlock Style="{StaticResource SousTexteCarte}" Text="Ce mois" />
                        </StackPanel>

                        <!--  Emoji  -->
                        <TextBlock
                            Grid.Column="1"
                            Opacity="0.3"
                            Style="{StaticResource EmojiCarte}"
                            Text="{StaticResource EmojiArgent}" />
                    </Grid>
                </Border>

                <!--  CARTE 2 : Consommation d'eau  -->
                <Border Grid.Column="1" Style="{StaticResource CarteStatistique}">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>

                        <!--  Contenu texte  -->
                        <StackPanel Grid.Column="0" VerticalAlignment="Center">
                            <TextBlock Style="{StaticResource TitreCarte}" Text="Consommation d'eau" />
                            <TextBlock
                                x:Name="TxtConsommationEau"
                                Foreground="#2196F3"
                                Style="{StaticResource ValeurCarte}"
                                Text="0,0 m³" />
                            <TextBlock Style="{StaticResource SousTexteCarte}" Text="Ce mois" />
                        </StackPanel>

                        <!--  Emoji  -->
                        <TextBlock
                            Grid.Column="1"
                            Opacity="0.3"
                            Style="{StaticResource EmojiCarte}"
                            Text="{StaticResource EmojiEau}" />
                    </Grid>
                </Border>

                <!--  CARTE 3 : Consommation d'électricité  -->
                <Border Grid.Column="2" Style="{StaticResource CarteStatistique}">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>

                        <!--  Contenu texte  -->
                        <StackPanel Grid.Column="0" VerticalAlignment="Center">
                            <TextBlock Style="{StaticResource TitreCarte}" Text="Électricité" />
                            <TextBlock
                                x:Name="TxtConsommationElec"
                                Foreground="#FF9800"
                                Style="{StaticResource ValeurCarte}"
                                Text="0 kWh" />
                            <TextBlock Style="{StaticResource SousTexteCarte}" Text="Ce mois" />
                        </StackPanel>

                        <!--  Emoji  -->
                        <TextBlock
                            Grid.Column="1"
                            Opacity="0.3"
                            Style="{StaticResource EmojiCarte}"
                            Text="{StaticResource EmojiElectricite}" />
                    </Grid>
                </Border>
            </Grid>
        </Viewbox>

        <!--  ══════════════════════════════════════════════════════  -->
        <!--  SECTION 2 : TITRE "DERNIÈRES FACTURES"  -->
        <!--  ══════════════════════════════════════════════════════  -->
        <TextBlock
            Grid.Row="2"
            Margin="10,0"
            FontSize="22"
            FontWeight="Bold"
            Foreground="{StaticResource TextePrincipal}">
            <Run Text="📋" />
            <Run Text="Dernières factures" />
        </TextBlock>

        <!--  ══════════════════════════════════════════════════════  -->
        <!--  SECTION 3 : LISTE DES FACTURES  -->
        <!--  ══════════════════════════════════════════════════════  -->
        <Border
            Grid.Row="3"
            Margin="10,10,10,0"
            Style="{StaticResource CarteStatistique}">
            <Grid>
                <Grid.RowDefinitions>
                    <!--  En-tête du tableau  -->
                    <RowDefinition Height="Auto" />
                    <!--  Séparateur  -->
                    <RowDefinition Height="1" />
                    <!--  Contenu des factures  -->
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>

                <!--  EN-TÊTE DU TABLEAU  -->
                <Grid Grid.Row="0" Margin="10,10,10,18">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>

                    <TextBlock
                        Grid.Column="0"
                        FontSize="14"
                        FontWeight="Bold"
                        Foreground="{StaticResource TexteSecondaire}"
                        Text="Type" />
                    <TextBlock
                        Grid.Column="1"
                        FontSize="14"
                        FontWeight="Bold"
                        Foreground="{StaticResource TexteSecondaire}"
                        Text="Date" />
                    <TextBlock
                        Grid.Column="2"
                        FontSize="14"
                        FontWeight="Bold"
                        Foreground="{StaticResource TexteSecondaire}"
                        Text="Montant" />
                    <TextBlock
                        Grid.Column="3"
                        FontSize="14"
                        FontWeight="Bold"
                        Foreground="{StaticResource TexteSecondaire}"
                        Text="Statut" />
                </Grid>

                <!--  SÉPARATEUR  -->
                <Border Grid.Row="1" Background="{StaticResource BordureClaire}" />

                <!--  CONTENU DES FACTURES  -->
                <Grid Grid.Row="2">
                    <!--  MESSAGE SI AUCUNE FACTURE  -->
                    <StackPanel
                        x:Name="StackPanelVide"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"
                        Visibility="Visible">
                        <TextBlock
                            HorizontalAlignment="Center"
                            FontSize="52"
                            Opacity="0.3"
                            Text="{StaticResource EmojiConstruction}" />
                        <TextBlock
                            Margin="0,12,0,0"
                            HorizontalAlignment="Center"
                            FontSize="17"
                            Foreground="{StaticResource TexteSecondaire}"
                            Text="Aucune facture pour le moment" />
                        <TextBlock
                            Margin="0,6,0,0"
                            HorizontalAlignment="Center"
                            FontSize="14"
                            Foreground="{StaticResource TexteSecondaire}"
                            Text="Les factures apparaîtront ici" />
                    </StackPanel>

                    <!--  LISTE AVEC DONNÉES  -->
                    <ScrollViewer
                        x:Name="ScrollFactures"
                        VerticalScrollBarVisibility="Auto"
                        Visibility="Collapsed">
                        <ItemsControl x:Name="ListeFactures">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <Border
                                        Margin="10,6"
                                        Padding="12,10"
                                        Background="Transparent"
                                        BorderBrush="{StaticResource BordureClaire}"
                                        BorderThickness="0,0,0,1">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*" />
                                                <ColumnDefinition Width="*" />
                                                <ColumnDefinition Width="*" />
                                                <ColumnDefinition Width="*" />
                                            </Grid.ColumnDefinitions>

                                            <!--  Type  -->
                                            <TextBlock
                                                Grid.Column="0"
                                                VerticalAlignment="Center"
                                                FontSize="14"
                                                Foreground="{StaticResource TextePrincipal}">
                                                <Run Text="📋" />
                                                <Run Text="{Binding Type}" />
                                            </TextBlock>

                                            <!--  Date  -->
                                            <TextBlock
                                                Grid.Column="1"
                                                VerticalAlignment="Center"
                                                FontSize="14"
                                                Foreground="{StaticResource TextePrincipal}"
                                                Text="{Binding DateFacture, StringFormat='{}{0:dd/MM/yyyy}'}" />

                                            <!--  Montant  -->
                                            <TextBlock
                                                Grid.Column="2"
                                                VerticalAlignment="Center"
                                                FontSize="14"
                                                FontWeight="SemiBold"
                                                Foreground="{StaticResource CouleurPrincipale}"
                                                Text="{Binding Montant, StringFormat='{}{0:F2} €'}" />

                                            <!--  Statut  -->
                                            <TextBlock
                                                Grid.Column="3"
                                                VerticalAlignment="Center"
                                                FontSize="14"
                                                FontWeight="SemiBold">
                                                <TextBlock.Style>
                                                    <Style TargetType="TextBlock">
                                                        <Style.Triggers>
                                                            <DataTrigger Binding="{Binding EstPayee}" Value="True">
                                                                <Setter Property="Text" Value="✅ Payée" />
                                                                <Setter Property="Foreground" Value="{StaticResource CouleurSucces}" />
                                                            </DataTrigger>
                                                            <DataTrigger Binding="{Binding EstPayee}" Value="False">
                                                                <Setter Property="Text" Value="⏳ En attente" />
                                                                <Setter Property="Foreground" Value="{StaticResource CouleurAlerte}" />
                                                            </DataTrigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </TextBlock.Style>
                                            </TextBlock>
                                        </Grid>
                                    </Border>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </ScrollViewer>
                </Grid>
            </Grid>
        </Border>
    </Grid>
</Page>